<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="ir_dept_bookhis" language="groovy" pageWidth="595" pageHeight="842" columnWidth="555" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20" uuid="b950c2c7-db72-4e7a-8f0c-b8688c65d2a7">
	<property name="ireport.zoom" value="1.3310000000000004"/>
	<property name="ireport.x" value="0"/>
	<property name="ireport.y" value="0"/>
	<parameter name="as_coopid" class="java.lang.String">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<parameter name="as_accountno" class="java.lang.String">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<queryString>
		<![CDATA[select
dpucfbookconst.book_grp,
dpucfbookconst.book_desc,
dpdeptmaster.depttype_code,
book_no,
dpdeptbookhis.book_status,
TO_CHAR(new_date, 'DD/MM/YYYY', 'NLS_CALENDAR=''THAI BUDDHA'' NLS_DATE_LANGUAGE=THAI') as new_date,
new_id,
dpdeptbookhis.deptaccount_no,
dpdeptmaster.deptaccount_name,
dpdeptbookhis.sub_book,
cmcoopmaster.coop_name
from dpdeptbookhis inner join dpucfbookconst on dpdeptbookhis.book_grp = dpucfbookconst.book_grp
left join dpdeptmaster on dpdeptmaster.deptaccount_no = dpdeptbookhis.deptaccount_no
left join cmcoopmaster on dpdeptbookhis.coop_id = cmcoopmaster.coop_id
 where dpdeptbookhis.coop_id = $P{as_coopid}
AND dpdeptbookhis.deptaccount_no = $P{as_accountno}
order by  dpucfbookconst.book_grp,book_no]]>
	</queryString>
	<field name="BOOK_GRP" class="java.lang.String"/>
	<field name="BOOK_DESC" class="java.lang.String"/>
	<field name="DEPTTYPE_CODE" class="java.lang.String"/>
	<field name="BOOK_NO" class="java.lang.String"/>
	<field name="BOOK_STATUS" class="java.math.BigDecimal"/>
	<field name="NEW_DATE" class="java.lang.String"/>
	<field name="NEW_ID" class="java.lang.String"/>
	<field name="DEPTACCOUNT_NO" class="java.lang.String"/>
	<field name="DEPTACCOUNT_NAME" class="java.lang.String"/>
	<field name="SUB_BOOK" class="java.lang.String"/>
	<field name="COOP_NAME" class="java.lang.String"/>
	<background>
		<band splitType="Stretch"/>
	</background>
	<columnHeader>
		<band height="123" splitType="Stretch">
			<staticText>
				<reportElement uuid="d3113eed-13f8-4363-8872-9b75e5cd9d98" x="-1" y="48" width="556" height="28"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="Angsana New" size="16" isBold="true"/>
				</textElement>
				<text><![CDATA[รายงานประวัติการพิมพ์สมุด]]></text>
			</staticText>
			<textField>
				<reportElement uuid="7c167084-4eeb-4f99-8f0e-3c48cb6c0c82" x="0" y="20" width="555" height="28"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="Angsana New" size="16" isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{COOP_NAME}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement uuid="0e2b9518-fc31-42b0-bb40-f97daa7c9df9" x="455" y="0" width="100" height="20"/>
				<textElement textAlignment="Right" verticalAlignment="Middle">
					<font fontName="Angsana New" size="12"/>
				</textElement>
				<textFieldExpression><![CDATA["วันที่พิมพ์: "+new SimpleDateFormat("dd/MM/yyyy",new Locale("th","TH")).format(new java.util.Date())]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement uuid="28d95b04-fd91-4036-be2a-1e5d672e0a3f" x="75" y="103" width="120" height="20"/>
				<box>
					<topPen lineWidth="1.0"/>
					<bottomPen lineWidth="1.0"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="Angsana New" size="14"/>
				</textElement>
				<text><![CDATA[เลขที่สมุด]]></text>
			</staticText>
			<staticText>
				<reportElement uuid="abee0df0-fe15-4387-9301-45e63a5e0434" x="195" y="103" width="120" height="20"/>
				<box>
					<topPen lineWidth="1.0"/>
					<bottomPen lineWidth="1.0"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="Angsana New" size="14"/>
				</textElement>
				<text><![CDATA[วันที่ออกสมุด]]></text>
			</staticText>
			<staticText>
				<reportElement uuid="a4af11be-3837-478a-8dbd-fae5dd4d611c" x="1" y="103" width="74" height="20"/>
				<box>
					<topPen lineWidth="1.0"/>
					<leftPen lineWidth="0.0"/>
					<bottomPen lineWidth="1.0"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="Angsana New" size="14"/>
				</textElement>
				<text><![CDATA[ลำดับ]]></text>
			</staticText>
			<staticText>
				<reportElement uuid="5ec7f839-8e22-478b-936b-a237e9b77599" x="435" y="103" width="120" height="20"/>
				<box>
					<topPen lineWidth="1.0"/>
					<bottomPen lineWidth="1.0"/>
					<rightPen lineWidth="0.0"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="Angsana New" size="14"/>
				</textElement>
				<text><![CDATA[ผู้ทำรายการ]]></text>
			</staticText>
			<staticText>
				<reportElement uuid="bf4d42c9-ad89-4063-aede-24e4d5f74dfa" x="315" y="103" width="120" height="20"/>
				<box>
					<topPen lineWidth="1.0"/>
					<bottomPen lineWidth="1.0"/>
					<rightPen lineWidth="0.0"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="Angsana New" size="14"/>
				</textElement>
				<text><![CDATA[เลขสมุดเดิม]]></text>
			</staticText>
			<textField>
				<reportElement uuid="195a448d-af65-4d60-979f-1abfda839728" x="0" y="76" width="555" height="27"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="Angsana New" size="16" isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA["รายงานประวัติการพิมพ์สมุด "+" เลขที่บัญชี  "+" " + $F{DEPTACCOUNT_NO} +" "+" "+" "+ $F{DEPTACCOUNT_NAME}]]></textFieldExpression>
			</textField>
		</band>
	</columnHeader>
	<detail>
		<band height="20" splitType="Stretch">
			<textField pattern="#,##0">
				<reportElement uuid="1039a787-c12c-412c-a85a-f015dfc49e69" x="0" y="0" width="75" height="20"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="Angsana New" size="14"/>
				</textElement>
				<textFieldExpression><![CDATA[$V{REPORT_COUNT}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement uuid="e1cfc08b-3212-4d04-94b0-e927387ca9b9" x="75" y="0" width="120" height="20"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="Angsana New" size="14"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{BOOK_NO}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement uuid="44b0737c-c392-44f1-b610-74dd327e3ce0" x="435" y="0" width="120" height="20"/>
				<textElement verticalAlignment="Middle">
					<font fontName="Angsana New" size="14"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{NEW_ID}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement uuid="d6067840-7daf-402b-8ec3-91ba164128d3" x="315" y="0" width="120" height="20"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="Angsana New" size="14"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{SUB_BOOK}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement uuid="784b6c34-2bc9-49e4-9638-e14879c9ece8" x="195" y="0" width="120" height="20"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="Angsana New" size="14"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{NEW_DATE}]]></textFieldExpression>
			</textField>
		</band>
	</detail>
	<summary>
		<band height="20" splitType="Stretch">
			<staticText>
				<reportElement uuid="95d68cdd-df56-4c6a-950e-262f8b36a2a3" x="0" y="0" width="555" height="20"/>
				<box>
					<topPen lineWidth="1.0"/>
				</box>
				<textElement/>
				<text><![CDATA[]]></text>
			</staticText>
		</band>
	</summary>
</jasperReport>
